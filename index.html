<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Tourist Safety</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    body {
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(12px);
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.4);
      width: 100%;
      max-width: 800px;
      text-align: center;
    }
    .form-control {
      border-radius: 12px;
      background: rgba(255,255,255,0.2);
      border: none;
      color: #fff;
    }
    .form-control::placeholder {
      color: #ddd;
    }
    .btn-custom {
      background: linear-gradient(45deg, #ff512f, #dd2476);
      border: none;
      border-radius: 12px;
      padding: 10px;
      font-weight: bold;
      color: #fff;
      transition: 0.3s;
    }
    .btn-custom:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }
    #profileCard { display: none; }
    #map { height: 300px; border-radius: 12px; margin-top: 15px; }
    .feature-box {
      background: rgba(0,0,0,0.3);
      border-radius: 12px;
      padding: 15px;
      margin-top: 20px;
      text-align: left;
    }
  </style>
</head>
<body>

<!-- Login / Signup -->
<div class="card" id="authCard">
  <h3 class="mb-3">ğŸ” Smart Tourist Safety</h3>
  <input type="text" id="username" class="form-control mb-3" placeholder="Enter Username">
  <input type="password" id="password" class="form-control mb-3" placeholder="Enter Password">
  <button class="btn btn-custom w-100 mb-2" onclick="login()">Login</button>
  <button class="btn btn-outline-light w-100" onclick="signup()">Signup</button>
</div>

<!-- Profile + Features -->
<div class="card" id="profileCard">
  <h3 class="mb-3">ğŸ‘¤ User Profile</h3>
  <div class="feature-box">
    <p><strong>Name:</strong> <span id="pName"></span></p>
    <p><strong>User ID:</strong> <span id="pID"></span></p>
    <p><strong>Blockchain Hash:</strong> <span id="pHash" class="text-warning"></span></p>
  </div>

  <!-- Lost Tourist -->
  <div class="feature-box">
    <h5>ğŸ“ Lost Tourist (Safe Zone)</h5>
    <div id="map"></div>
    <button class="btn btn-custom mt-2" onclick="startLiveTracking()">Start Tracking</button>
    <button class="btn btn-outline-light mt-2" onclick="stopLiveTracking()">Stop Tracking</button>
  </div>

  <!-- Language Barrier -->
  <div class="feature-box">
    <h5>ğŸŒ Language Barrier</h5>
    <input type="text" class="form-control mb-2" id="langInput" placeholder="Say something...">
    <button class="btn btn-custom" onclick="translateText()">Translate</button>
    <p class="mt-2"><strong>Translated:</strong> <span id="translatedText">---</span></p>
  </div>

  <!-- Health Emergency -->
  <div class="feature-box">
    <h5>ğŸš¨ Health Emergency</h5>
    <button class="btn btn-danger w-100" onclick="sendHealthSOS()">Send SOS</button>
  </div>

  <!-- Women Safety -->
  <div class="feature-box">
    <h5>ğŸ‘© Women Safety Alert</h5>
    <button class="btn btn-warning w-100" onclick="sendWomenSOS()">Alert Police</button>
  </div>

  <!-- Natural Hazard -->
  <div class="feature-box">
    <h5>ğŸŒ‹ Natural Hazard Alert</h5>
    <button class="btn btn-custom" onclick="triggerHazard()">Trigger Hazard</button>
    <button class="btn btn-outline-light" onclick="clearHazard()">Clear Alert</button>
    <p id="hazardMsg" class="mt-2 text-danger"></p>
  </div>
</div>

<!-- Scripts -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  // Login Function
  function login() {
    const username = document.getElementById("username").value;
    if(username.trim() === "") {
      alert("Please enter username!");
      return;
    }
    document.getElementById("authCard").style.display = "none";
    document.getElementById("profileCard").style.display = "block";
    document.getElementById("pName").innerText = username;
    document.getElementById("pID").innerText = "USR" + Math.floor(Math.random()*10000);
    document.getElementById("pHash").innerText = generateHash(username);
    initMap();
  }

  function signup() { alert("Signup successful! Now login to continue."); }

  function generateHash(input) {
    let hash = 0;
    for (let i = 0; i < input.length; i++) {
      hash = (hash << 5) - hash + input.charCodeAt(i);
      hash |= 0;
    }
    return "0x" + Math.abs(hash).toString(16) + Date.now().toString(16);
  }

  // Map Setup
  let map, circle, marker, trackInterval;
  function initMap() {
    map = L.map('map').setView([28.6139, 77.2090], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);
    circle = L.circle([28.6139, 77.2090], {
      color: 'blue', fillColor: '#30f', fillOpacity: 0.2, radius: 1000
    }).addTo(map);
    marker = L.marker([28.6139, 77.2090]).addTo(map)
      .bindPopup("You are inside safe zone").openPopup();
  }

  function checkSafeStatus(lat, lng) {
    var center = circle.getLatLng();
    var distance = map.distance(center, [lat, lng]);
    if(distance > circle.getRadius()) {
      alert("âš  You are leaving the Safe Zone!");
    }
  }

  function startLiveTracking() {
    trackInterval = setInterval(() => {
      let newLat = 28.61 + (Math.random()/100);
      let newLng = 77.20 + (Math.random()/100);
      marker.setLatLng([newLat, newLng]);
      checkSafeStatus(newLat, newLng);
    }, 5000);
    alert("ğŸ“¡ Live tracking started.");
  }

  function stopLiveTracking() {
    clearInterval(trackInterval);
    alert("ğŸ›‘ Live tracking stopped.");
  }

  // Language Translation (Dummy Demo)
  function translateText() {
    let input = document.getElementById("langInput").value;
    document.getElementById("translatedText").innerText =
      input ? input.split("").reverse().join("") : "---";
  }

  // SOS Functions
  function sendHealthSOS() {
    alert("ğŸš‘ Health SOS sent to Family & Hospital with location.");
  }
  function sendWomenSOS() {
    alert("ğŸš“ Women Safety Alert sent to Police with live location.");
  }

  // Natural Hazard
  function triggerHazard() {
    document.getElementById("hazardMsg").innerText =
      "âš  Flood warning! Move to safe zone immediately.";
  }
  function clearHazard() {
    document.getElementById("hazardMsg").innerText = "";
  }
</script>

</body>
</html>